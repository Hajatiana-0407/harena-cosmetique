{% extends 'base.html.twig' %}

{% block title %}Connexion Administrateur{% endblock %}

{% block body %}
<style>
  :root {
    --brand: #1D4ED8; /* Indigo */
    --brand-2: #3B82F6; /* Blue */
    --slate-700: #334155;
    --slate-600: #475569;
    --bg: #F6F8FC;
  }

  .auth-shell {
    min-height: 100vh;
    display: flex; 
    align-items: center; padding: 2rem 1rem;
    font-family: poppins;
  }
  
  .brand{
    font-size: 18pt;
    margin-bottom: 20px;
  }

  .auth-card {
    border-radius: 1rem;
    overflow: hidden;
    background: #fff;
    gap: 5px;
    box-shadow: 0 16px 40px rgba(2,6,23,.08);
  }

  .group{
    display: flex;
    flex-wrap: wrap;

  }

  .g-right{
    width: 400px;
    height: 640px;
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .form-group{
    margin: 10px 0px;
    margin-top: 20px ;
    display: flex;
    align-items: start;
    justify-content: center;
  }
  .form-control{
    border: 1px solid grey;
    padding: 8px 16px ;
    width: 100%;
  }
  .btn-login{
    margin-top: 10px;
    border: 1px solid grey;
    padding: 8px 16px ;
    width: 100%;
    font-size: 16pt;
  }
  .visually-hidden{
    font-size: 16pt;
  }

  /* Left column */
  .hero {
    background: linear-gradient(135deg, var(--brand-2), var(--brand));
    color: #fff;
  }
  .hero-inner { padding: 2rem; }
  @media (min-width: 992px) { .hero-inner { padding: 3rem; } }
  .hero-title { font-weight: 800; line-height: 1.15; }
  .hero-sub { opacity: .95; }
  .hero-list { list-style: none; padding: 0; margin: 1.25rem 0 0; }
  .hero-list li { display:flex; align-items:center; gap:.6rem; margin:.5rem 0; opacity:.95; }
  .hero-check { width:24px; height:24px; border-radius: 50%; display:inline-flex; align-items:center; justify-content:center; background: rgba(255,255,255,.18); border: 1px solid rgba(255,255,255,.35); font-weight:700; }

  /* Right column */
  .form-side { background: #fff; }
  .brand-row { display:flex; align-items:center; justify-content: space-between; }
  .brand { display:flex; align-items:center; gap:.5rem; font-weight: 700; color: var(--slate-700); }
  .brand img { height: 28px; }

  .panel { max-width: 420px; margin: 0 auto; }
  .panel h1 { color: var(--slate-700); font-weight: 800; }

  .form-label { font-weight: 600; color: var(--slate-700); }
  .form-control { height: 46px; border-radius: .65rem; }
  .form-control:focus { box-shadow: 0 0 0 .25rem rgba(59,130,246,.2); border-color: #93c5fd; }

  .btn-login { height: 48px; border-radius: .75rem; border: none; width: 100%; font-weight: 700; letter-spacing: .2px; background: linear-gradient(90deg, var(--brand-2), var(--brand)); color: #fff; }
  .btn-login:hover { filter: brightness(1.05); }

  .alert-custom { border-radius: .75rem; }
</style>

<div class="auth-shell">
  <div class="container">
    <div class="d-flex justify-content-center">
      <div class="col-12 col-xl-10">
        <div class="auth-card">
          <div class="group g-0">
            <!-- Right form (clean) -->
            <div class="g-right form-side d-flex align-items-center">
              <div class="w-100 p-4 p-md-5">
                <div class="brand-row mb-4">
                  <div class="brand">
                    <img src="{{ asset('image/MonLogo.png') }}" alt="Harena" />
                    <span>Harena Cosmetic</span>
                  </div>
                </div>

                <div class="panel w-100">
                 
                  {% if error %}
                    <div class="alert alert-danger alert-custom" role="alert">
                      <div class="fw-semibold text-danger">√âchec de l'authentification</div>
                      <div class="small">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                    </div>
                  {% endif %}

                  <form method="post" novalidate class="mt-3">
                    <div class="mb-3 form-group">
                      <label for="inputEmail" class="form-label">Email</label>
                      <input type="email" id="inputEmail" name="_username" value="{{ last_username }}" class="form-control" placeholder="vous@mail.com" autocomplete="email" required autofocus>
                    </div>

                    <div class="mb-2 position-relative form-group">
                      <label for="inputPassword" class="form-label">Mot de passe</label>
                      <input type="password" id="inputPassword" name="_password" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required>
                      {# <button type="button" id="togglePwd" class="btn btn-sm position-absolute top-0 end-0 mt-4 me-2 text-secondary" style="background: transparent;">
                        <span class="visually-hidden">üëÅ</span> 
                      </button> #}
                    </div>

                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                    <div id="capsIndicator" class="text-warning" style="display:none; font-size:.85rem;">Verrouillage des majuscules activ√©</div>

                    <div class="d-flex align-items-center justify-content-between mb-3 mt-2">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="1" id="rememberMe" name="_remember_me">
                        <label class="form-check-label" for="rememberMe">Se souvenir de moi</label>
                      </div>
                      <a href="#" class="text-decoration-none" style="color: var(--brand); font-weight:600;">Mot de passe oubli√© ?</a>
                    </div>

                    <button type="submit" class="btn-login">Se connecter</button>

                    {# <div class="mt-4 p-3 rounded" style="background:#f8fafc; border:1px solid #e2e8f0;">
                      <div class="small text-muted">Compte admin par d√©faut (d√©veloppement) :</div>
                      <div class="small"><span class="fw-semibold">Email:</span> admin@harena.mg</div>
                      <div class="small"><span class="fw-semibold">Mot de passe:</span> Admin123@</div>
                    </div> #}
                  </form>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function() {
    const pwd = document.getElementById('inputPassword');
    const toggle = document.getElementById('togglePwd');
    const caps = document.getElementById('capsIndicator');

    if (toggle && pwd) {
      toggle.addEventListener('click', function() {
        const isPwd = pwd.getAttribute('type') === 'password';
        pwd.setAttribute('type', isPwd ? 'text' : 'password');
      });
    }

    if (pwd && caps) {
      pwd.addEventListener('keyup', function(e) {
        const capsOn = e.getModifierState && e.getModifierState('CapsLock');
        caps.style.display = capsOn ? 'block' : 'none';
      });
      pwd.addEventListener('blur', function() { caps.style.display = 'none'; });
    }
  })();
</script>
{% endblock %}
